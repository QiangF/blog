---
layout: post
author: Train
description: "开启Marc单机多核并行计算方法"
keywords: "Marc, 并行计算"
---

并行计算可以有效利用本地或者网络计算机计算资源，提高计算效率，特别是针对一些计算规模相对较大的问题。本文作为MARC单机多核并行计算的一个示例。

测试平台：WIN7 64Bit MARC2011

步骤摘要：基本配置→分配单元→提交计算

<!--more-->
<h1>1、基本配置</h1>
（1）在MARC安装目录下的intelmpiwin64bin目录（32Bit计算机选择win32文件夹），运行wmpiregister.exe.

（2）输入用户名(登陆windows的账户名，通常为administrator)及密码（若密码为空，需要重新设置一个密码），点击register按钮，下面的对话框中会出现“Password encrypted into the Registry”信息。
<p style="text-align: center;"><img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/a9d3fd1f4134970a64d944bb95cad1c8a6865dff.jpg" /></p>
（3）运行ismpd.exe，或者到dos提示符下，进入该目录，运行ismpd -install。

假如提示都正常的话，到此即完成进行并行计算的前提条件了。
<h1>2、分配单元</h1>
单机多核计算提高效率的途径在于几个核心同时进行计算，因此对一个模型完成所有的建模后需要为参与计算的多核分配计算任务（软件自动分配或者用户手动分配），也就是单元，最后在提交任务前提示软件进行并行计算。

（1）打开一个已经调试无误的待计算文件

<img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/e7cd7b899e510fb38b872003d933c895d0430c83.jpg" />

（2）为多核分配单元

测试电脑为双核4线程，这里设置2核计算。①Jobs—&gt;User Domains调出面板，②Generate！按钮设置参与计算的CPU内核数，③输入分配的内核数2，回车确定，④软件自动为两个内核分配单元，并输出单元数信息，⑤勾选Identify，显示单元分配情况，最终如图所示。

<img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/cefc1e178a82b901d5eb92a7738da9773812efe4.jpg" />

也可以用户手动分配单元，①选择Manul Decomposition，出现手动分配单元的一些命令按钮，②Delete All删除之前自动分配情况，③Add Elements分别为内核分配不同的单元，④手动分配情况如图所示。

<img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/83025aafa40f4bfb7649cec0034f78f0f636188c.jpg" />
<h1>3、提交计算</h1>
完成上述步骤后，勾选Parallelization选项即可进行并行计算。<strong>
</strong>

①Job—&gt;Show Menu进入Job面板，②Run命令进入Run Job面板，③点击Parallelization进入相应面板，④勾选 Use DDM选项，假如使用用户分配的单元，选择 Decomposition In Mentat，⑤点击OK回到Run Job面板，⑥点击Submit即可提交任务进行并行计算。

<img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/9c16fdfaaf51f3de9f4ceaf094eef01f3b2979a3.jpg" />

运行情况如图所示。

<img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/b7fd5266d0160924dccdf08fd40735fae7cd34bd.jpg" />

<img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/b219ebc4b74543a915e6a8581e178a82b80114a0.jpg" />

<img class="aligncenter" alt="" src="http://skywayer.tk//wp-content/uploads/pic/2e2eb9389b504fc2cbb7e291e5dde71191ef6dbd.jpg" />